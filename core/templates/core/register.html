{% extends 'core/base.html' %}

{% block title %}Register - BoardingNest{% endblock %}

{% block content %}
<div class="container" style="max-width: 600px; padding: 60px 20px;">
    <div class="card">
        <div style="text-align: center; margin-bottom: 30px;">
            <h1 style="color: #FF1493; font-size: 2.5rem; margin-bottom: 10px;">✏️ Sign Up</h1>
            <p style="color: #666;">Create your BoardingNest account</p>
        </div>
        
        <form method="post" action="{% url 'register' %}">
            {% csrf_token %}
            
            {% if form.errors %}
            <div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                <strong>Please correct the errors below:</strong>
                <ul style="margin: 10px 0 0 20px; padding: 0;">
                    {% for field in form %}
                        {% for error in field.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    {% endfor %}
                    {% for error in form.non_field_errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            <label for="username">Username</label>
            <input type="text" id="username" name="username" required placeholder="Choose a username" value="{{ form.username.value|default_if_none:'' }}">
            
            <label for="first_name">First Name</label>
            <input type="text" id="first_name" name="first_name" required placeholder="Enter your first name" value="{{ form.first_name.value|default_if_none:'' }}">
            
            <label for="last_name">Last Name</label>
            <input type="text" id="last_name" name="last_name" required placeholder="Enter your last name" value="{{ form.last_name.value|default_if_none:'' }}">
            
            <label for="email">Email</label>
            <input type="email" id="email" name="email" required placeholder="Enter your email" value="{{ form.email.value|default_if_none:'' }}">
            
            <label for="role">I am a</label>
            <select id="role" name="role" required>
                <option value="">Select your role</option>
                <option value="customer" {% if form.role.value == 'customer' %}selected{% endif %}>Customer (Looking for a room)</option>
                <option value="landlord" {% if form.role.value == 'landlord' %}selected{% endif %}>Landlord/Landlady (Want to post rooms)</option>
                <option value="administrator" {% if form.role.value == 'administrator' %}selected{% endif %}>Administrator (Manage the system)</option>
            </select>
            
            <label for="phone_number">Phone Number (Optional)</label>
            <input type="tel" id="phone_number" name="phone_number" placeholder="Enter your phone number" value="{{ form.phone_number.value|default_if_none:'' }}">
            
            <label for="password1">Password</label>
            <div style="position: relative;">
                <input type="password" id="password1" name="password1" required placeholder="Create a password" style="padding-right: 70px;">
                <button type="button" onclick="togglePassword('password1', this)" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 0.85rem; padding: 5px 8px; color: #FF1493; font-weight: 600;">Show</button>
            </div>
            
            <label for="password2">Confirm Password</label>
            <div style="position: relative;">
                <input type="password" id="password2" name="password2" required placeholder="Confirm your password" style="padding-right: 70px;">
                <button type="button" onclick="togglePassword('password2', this)" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 0.85rem; padding: 5px 8px; color: #FF1493; font-weight: 600;">Show</button>
            </div>
            
            <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px; padding: 15px; height: 55px;">
                Create Account
            </button>
        </form>
        
        <div style="text-align: center; margin-top: 20px;">
            <p style="color: #666;">Already have an account? <a href="{% url 'login' %}" style="color: #FF1493; text-decoration: none; font-weight: 600;">Login here</a></p>
            <a href="{% url 'welcome' %}" style="color: #666; text-decoration: none; display: inline-block; margin-top: 10px;">← Back to Home</a>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function togglePassword(fieldId, button) {
    const field = document.getElementById(fieldId);
    if (field.type === 'password') {
        field.type = 'text';
        button.innerHTML = 'Hide';
    } else {
        field.type = 'password';
        button.innerHTML = 'Show';
    }
}
</script>
{% endblock %}

